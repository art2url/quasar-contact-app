---
export interface Props {
  src: string; // Base image path without /assets/screenshots/ prefix
  alt: string;
  loading?: 'lazy' | 'eager';
  class?: string;
}

const { src, alt, loading = 'lazy', class: className } = Astro.props;

// Convert x1 naming to x2 for desktop (x1 for mobile, x2 for desktop)
const desktopSrc = src.replace('x1_', 'x2_');
---

<picture class={className}>
  <!-- Mobile: Serve smaller images for screens < 768px -->
  <source
    media="(max-width: 767px)"
    srcset={`/assets/screenshots/mobile/${src}`}
  />
  <!-- Desktop: Serve full-size images for screens >= 768px -->
  <source
    media="(min-width: 768px)"
    srcset={`/assets/screenshots/desktop/${desktopSrc}`}
  />
  <!-- Fallback for older browsers -->
  <img
    src={`/assets/screenshots/desktop/${desktopSrc}`}
    alt={alt}
    loading={loading}
    style="width: 100%; height: auto;"
  />
</picture>