<!-- Hidden file input -->
<input #fileInput type="file" accept="image/*" (change)="onFileSelected($event)" style="display: none" />

<!-- Image attachment button -->
<button
  type="button"
  class="image-button"
  (click)="onButtonClick()"
  [disabled]="disabled || isProcessing"
  [attr.aria-label]="isProcessing ? 'Processing image...' : 'Attach image'">
  <!-- Loading spinner when processing -->
  <div *ngIf="isProcessing" class="spinner"></div>

  <!-- Image icon when not processing -->
  <svg width="44" height="44" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M444.5 147C459 161.5 496 225.348 450.344 271.004C417.597 306.828 417.597 306.828 417.597 306.828L315.916 408.254C313.849 410.303 311.211 413.314 308.336 415.518C305.353 417.804 301.649 419.61 297.142 419.101C291.647 418.446 287.097 414.72 284.729 410.141C282.345 405.529 281.996 399.671 285.495 394.808C286.603 393.268 288.011 391.851 289.353 390.585C325.316 354.854 365.23 315.669 400.955 279.733C407.309 273.477 418.773 261.193 418.773 261.193C437 242.966 447.5 199 421 171.5C394.5 144 395 142.5 372.5 122.5C350 102.5 309.786 100.911 281.5 125.5L138.702 267.677C129.014 277.148 116.805 288.432 108.162 298.371C86.7284 323.02 89.6377 355.021 105.896 377.284C122.119 399.5 151.394 411.682 182.63 396.818L183.565 396.367C193.014 391.74 196.233 388.06 204.141 380.352L272.335 312.804C290.701 294.004 309.765 275.595 328.239 257.003C335.673 249.521 338.875 242.179 339.385 235.756C339.895 229.333 337.737 223.583 334.003 219.19C326.471 210.327 312.768 207.169 301.873 215.228L209.856 307.329L200.413 317.19C198.735 318.675 191.568 325.284 190.093 326.01C184.834 328.597 179.386 327.589 175.334 324.673C171.329 321.791 168.56 316.973 168.464 311.655C168.321 303.604 174.077 298.904 178.128 294.855L222.267 250.981C238.226 234.951 254.521 218.771 270.191 202.62C274.499 198.18 279.2 192.981 284.71 189.195C335.261 155.783 393.633 213.575 361.711 266.043C357.73 272.587 352.899 276.678 348.021 281.584L230.937 398.315C226.709 402.613 222.427 407.42 217.524 411.459C194.7 430.265 170.419 436.808 147.908 434.584C125.444 432.364 104.923 421.434 89.49 405.604C58.6497 373.971 47.7704 322.23 82.7884 280.457C85.3909 277.411 88.3211 274.488 91.2246 271.659C94.155 268.805 97.0354 266.069 99.6716 263.291L217.93 144.818C224.552 138.173 234.462 127.602 244.237 117.949C254.04 108.268 247.69 115 270.191 92.5002C292.691 70 353.892 57.5001 396 98.5001C438.108 139.5 430 132.5 444.5 147Z"
      fill="currentColor" />
  </svg>
</button>
