<!-- Hidden file input -->
<input #fileInput type="file" accept="image/*" (change)="onFileSelected($event)" style="display: none" />

<!-- Image attachment button -->
<button
  type="button"
  class="image-button"
  (click)="onButtonClick()"
  [disabled]="disabled || isProcessing"
  [attr.aria-label]="isProcessing ? 'Processing image...' : 'Attach image'">
  <!-- Loading spinner when processing -->
  <div *ngIf="isProcessing" class="spinner"></div>

  <!-- Image icon when not processing -->
  <svg viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg" class="image-icon">
    <g clip-path="url(#clip0_771_20208)">
      <path
        d="M476.25 123.758C494.295 141.794 540.342 221.214 483.523 278.005C442.77 322.567 442.77 322.567 442.77 322.567L316.228 448.73C313.657 451.279 310.373 455.025 306.795 457.766C303.083 460.61 298.474 462.857 292.864 462.223C286.026 461.408 280.363 456.773 277.417 451.078C274.449 445.341 274.016 438.054 278.37 432.005C279.749 430.089 281.501 428.327 283.171 426.752C327.927 382.307 377.599 333.565 422.059 288.864C429.966 281.081 444.233 265.802 444.233 265.802C466.917 243.13 479.984 188.441 447.005 154.234C414.026 120.026 414.648 118.16 386.647 93.2825C358.646 68.4046 308.599 66.4279 273.398 97.0142L95.6876 273.868C83.6307 285.648 68.4373 299.684 57.6811 312.048C31.0066 342.709 34.6272 382.515 54.8602 410.207C75.0505 437.841 111.482 452.995 150.355 434.505L151.519 433.945C163.279 428.189 167.285 423.612 177.126 414.023L261.992 330.001C284.848 306.615 308.574 283.716 331.564 260.591C340.816 251.283 344.801 242.151 345.436 234.161C346.07 226.172 343.384 219.019 338.738 213.554C329.365 202.53 312.311 198.602 298.752 208.626L184.238 323.19L172.487 335.456C170.398 337.304 161.479 345.524 159.642 346.427C153.098 349.645 146.319 348.392 141.275 344.765C136.291 341.18 132.845 335.186 132.726 328.572C132.547 318.557 139.712 312.711 144.752 307.674L199.684 253.1C219.544 233.159 239.822 213.033 259.324 192.944C264.685 187.42 270.536 180.953 277.392 176.244C340.304 134.683 412.946 206.57 373.22 271.835C368.265 279.974 362.254 285.064 356.183 291.166L210.473 436.368C205.211 441.714 199.882 447.693 193.781 452.717C165.376 476.11 135.159 484.249 107.144 481.482C79.1872 478.721 53.6491 465.125 34.4434 445.434C-3.93704 406.086 -17.4763 341.725 26.1033 289.764C29.3421 285.976 32.9887 282.339 36.6021 278.821C40.2489 275.27 43.8336 271.867 47.1143 268.412L194.286 121.044C202.527 112.778 214.86 99.6286 227.025 87.6213C239.224 75.5793 231.322 83.9533 259.324 55.9654C287.325 27.9775 363.489 12.4288 415.892 63.4286C468.296 114.428 458.205 105.721 476.25 123.758Z"
        fill="currentColor" />
    </g>
    <defs>
      <clipPath id="clip0_771_20208">
        <rect width="512" height="512" fill="white" transform="matrix(-1 0 0 1 512 0)" />
      </clipPath>
    </defs>
  </svg>
</button>
