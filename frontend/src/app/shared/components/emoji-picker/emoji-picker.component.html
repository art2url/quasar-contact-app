<!-- Emoji button -->
<button
  type="button"
  class="emoji-button"
  (click)="togglePicker($event)"
  [disabled]="disabled"
  [attr.aria-label]="'Add emoji'">
  <svg width="44" height="44" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M247.257 61.1998C354.724 56.376 445.797 139.495 450.787 246.955C455.776 354.415 372.797 445.616 265.346 450.772L264.085 450.829C157.365 455.272 66.9066 372.968 61.2762 266.305L61.2137 265.044C56.2326 157.769 140.164 66.6869 247.257 61.1998ZM420.819 248.346C416.597 157.42 339.535 87.0881 248.601 91.1695C157.468 95.2602 86.9502 172.526 91.1815 263.653C95.4127 354.779 172.788 425.179 263.908 420.806C354.828 416.444 425.041 339.274 420.819 248.346Z"
      fill="currentColor" />
    <path
      d="M202.754 246.787C188.594 248.953 175.35 239.254 173.14 225.1C170.93 210.946 180.587 197.672 194.734 195.417C208.944 193.153 222.291 202.863 224.51 217.079C226.73 231.297 216.979 244.612 202.754 246.787Z"
      fill="currentColor" />
    <path
      d="M312.788 247.089C298.412 247.069 286.781 235.385 286.825 221.009C286.87 206.633 298.573 195.022 312.949 195.09C327.291 195.158 338.87 206.827 338.825 221.17C338.781 235.512 327.131 247.109 312.788 247.089Z"
      fill="currentColor" />
    <path
      d="M306.452 300.427C311.739 294.049 321.195 293.166 327.573 298.452C333.951 303.739 334.835 313.196 329.548 319.573C291.982 364.89 220.824 361.485 182.544 319.683C177.307 313.493 177.935 304.22 184.025 298.797C190.116 293.375 200.294 294.812 205.838 300.729C232.895 330.27 281.51 330.516 306.452 300.427Z"
      fill="currentColor" />
  </svg>
</button>

<!-- Emoji picker dropdown -->
<div
  *ngIf="showPicker"
  class="emoji-picker"
  (click)="onPickerClick($event)"
  (keydown)="onKeyDown($event)"
  tabindex="-1"
  aria-label="Emoji picker">
  <div class="emoji-grid">
    <button
      *ngFor="let emoji of popularEmojis"
      class="emoji-option"
      (click)="onEmojiClick(emoji)"
      (keydown.enter)="onEmojiClick(emoji)"
      (keydown.space)="onEmojiClick(emoji)"
      [title]="emoji"
      [attr.aria-label]="emoji">
      {{ emoji }}
    </button>
  </div>
</div>
